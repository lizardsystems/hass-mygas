alias: "–ú–æ–π –ì–∞–∑: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞"
description: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ –ú–æ–π –ì–∞–∑
triggers:
  - event_type: mygas_send_readings_failed
    trigger: event
  - event_type: mygas_get_bill_failed
    trigger: event
  - event_type: mygas_refresh_failed
    trigger: event
conditions: []
actions:
  - data:
      config_entry_id: <YOUR_TELEGRAM_BOT_CONFIG_ENTRY_ID>  # Replace with your Telegram Bot config entry ID
      message: "{{ trigger.event.data.error }}"
      title: >-
        üî•–ì–∞–∑. {% if trigger.event.event_type == 'mygas_send_readings_failed' %}
        –û—à–∏–±–∫–∞ –ø—Ä–∏   –ø–µ—Ä–µ–¥–∞—á–µ –ø–æ–∫–∞–∑–∞–Ω–∏–π –¥–ª—è {% elif trigger.event.event_type
        ==   'mygas_get_bill_failed' %} –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å—á–µ—Ç–∞ –¥–ª—è {% elif  
        trigger.event.event_type == 'mygas_refresh_failed' %} –û—à–∏–±–∫–∞ –ø—Ä–∏
        –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏   –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è {% else %} –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è
        {% endif %}   {{device_attr(trigger.event.data.device_id,
        'name_by_user') or    device_attr(trigger.event.data.device_id, 'name')
        }} –æ—Ç {{   now().strftime('%d-%m-%Y %H:%M')}}
    action: telegram_bot.send_message
  - data:
      title: >-
        üî•–ì–∞–∑. {% if trigger.event.event_type == 'mygas_send_readings_failed' %}
        –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –ø–æ–∫–∞–∑–∞–Ω–∏–π –¥–ª—è {% elif trigger.event.event_type ==
        'mygas_get_bill_failed' %} –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å—á–µ—Ç–∞ –¥–ª—è {% elif
        trigger.event.event_type == 'mygas_refresh_failed' %} –û—à–∏–±–∫–∞ –ø—Ä–∏
        –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è {% else %} –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è
        {% endif %} {{device_attr(trigger.event.data.device_id, 'name_by_user')
        or  device_attr(trigger.event.data.device_id, 'name') }}  –æ—Ç {{
        now().strftime('%d-%m-%Y %H:%M')}}
      message: "{{ trigger.event.data.error }}"
    action: notify.persistent_notification
mode: single
